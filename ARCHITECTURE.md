# 项目架构文档

本文档详细描述了网站导航项目的架构设计、技术选择和实现细节。

## 技术栈概述

本项目采用现代前端技术栈构建：

- **Next.js 15**: 使用App Router架构，提供服务端渲染和静态生成能力
- **React 18**: 使用最新的React功能，如并发模式和自动批处理
- **TypeScript**: 提供静态类型检查，增强代码健壮性
- **Tailwind CSS**: 实用优先的CSS框架，提高开发效率
- **Shadcn UI**: 基于Radix UI的组件库，提供高可访问性的UI组件

## 项目层次结构

项目遵循模块化和关注点分离的原则，主要分为以下几个层次：

```
├── 页面层 (app/)
├── 组件层 (components/)
├── 状态管理层 (contexts/, hooks/)
├── 配置层 (config/)
└── 工具层 (lib/)
```

## 核心模块详解

### 1. 页面模块 (app/)

采用Next.js 15的App Router架构，主要页面包括：

- **首页 (page.tsx)**: 展示所有网站分类和内容
- **历史记录页 (history/page.tsx)**: 展示用户的浏览历史
- **重定向页 (redirect/page.tsx)**: 网站跳转中间页，提供安全提示

页面模块主要负责组织布局和集成各个组件。

### 2. 组件模块 (components/)

遵循组件化设计原则，包含：

- **UI组件 (ui/)**: 基础UI组件，如按钮、卡片、输入框等
- **业务组件**: 如网站图标组件、移动端底部导航栏等

每个组件遵循单一职责原则，只负责特定的UI渲染和交互逻辑。

### 3. 状态管理模块 (contexts/, hooks/)

采用React Context API和自定义Hooks管理全局状态：

- **语言上下文 (language-context.tsx)**: 管理多语言支持
- **历史记录钩子 (use-history.ts)**: 管理浏览历史的存储和操作

这种设计使状态管理更加模块化和可测试。

### 4. 配置模块 (config/)

存放项目配置信息：

- **websites.ts**: 定义所有网站数据，按类别组织

配置与代码分离，便于维护和更新。

### 5. 工具模块 (lib/)

提供通用工具函数和辅助方法，如日期格式化、URL处理等。

## 数据流设计

本项目采用单向数据流设计：

1. 顶层组件通过Context提供全局状态和操作方法
2. 子组件通过useContext获取状态和操作方法
3. 用户交互触发状态更新
4. 状态更新导致UI重新渲染

这种设计使数据流清晰可预测，便于调试和维护。

## 多语言支持实现

项目实现了完整的多语言支持机制：

1. 使用React Context存储当前语言和翻译函数
2. 翻译文本集中存储在language-context.tsx中
3. 组件通过useLanguage钩子获取当前语言和翻译函数
4. 语言切换时，UI自动更新为对应语言

```typescript
// 使用示例
const { language, setLanguage, t } = useLanguage()
<h1>{t("nav.title")}</h1>
```

## 性能优化设计

项目内置了多种性能优化措施：

1. **代码分割**: Next.js自动进行代码分割，减少首次加载时间
2. **图片优化**: 使用Next.js的Image组件优化图片加载
3. **懒加载**: 非关键组件和资源采用懒加载
4. **缓存策略**: 使用localStorage缓存历史记录等数据
5. **状态优化**: 合理使用React.memo和useMemo避免不必要的渲染

## 响应式设计

项目实现了完整的响应式设计：

1. 使用Tailwind CSS的响应式类进行布局
2. 为移动端和桌面端提供不同的UI组件和交互方式
3. 使用媒体查询适配不同屏幕尺寸

```tsx
// 响应式设计示例
<div className="hidden md:block">桌面端显示</div>
<div className="block md:hidden">移动端显示</div>
```

## 安全考虑

项目内置了多项安全措施：

1. **网站跳转中间页**: 提供安全提示，防止钓鱼和欺诈
2. **数据验证**: 对用户输入和URL进行验证
3. **XSS防护**: 使用React的安全机制防止XSS攻击

## 扩展性设计

项目具有良好的扩展性：

1. **模块化架构**: 便于添加新功能和模块
2. **配置驱动**: 通过修改配置文件即可添加新网站和类别
3. **插件机制**: 可以轻松添加新的功能模块

## 开发和部署流程

### 开发流程

1. 本地开发: `npm run dev`
2. 代码检查: `npm run lint`
3. 构建: `npm run build`
4. 测试: `npm run test`

### 部署流程

1. 构建静态文件: `npm run build`
2. 部署到静态托管服务: 如Vercel, Netlify, GitHub Pages等
3. 或使用Next.js的Node.js服务器部署: `npm start`

## 未来扩展计划

1. 添加更多网站类别和网站
2. 支持更多语言
3. 添加用户认证和个性化设置
4. 实现PWA支持，提供离线访问能力
5. 添加网站健康检查功能
6. 集成更多第三方服务和API